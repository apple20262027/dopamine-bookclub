<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#FF6B9D">
    <meta name="description" content="å¤šå·´èƒºè¯»ä¹¦ä¼š - åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸€èµ·é˜…è¯»ã€åˆ†äº«ã€æˆé•¿">
    <title>å¤šå·´èƒºè¯»ä¹¦ä¼š</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“š</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">ğŸ“š</div>
                <h2>å¤šå·´èƒºè¯»ä¹¦ä¼š</h2>
            </div>
            <ul class="nav-list">
                <li class="nav-item active" data-page="home">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">é¦–é¡µ</span>
                </li>
                <li class="nav-item" data-page="members">
                    <span class="nav-icon">ğŸ‘¥</span>
                    <span class="nav-text">æˆå‘˜ç®¡ç†</span>
                </li>
                <li class="nav-item" data-page="photo-wall">
                    <span class="nav-icon">ğŸ–¼ï¸</span>
                    <span class="nav-text">ç…§ç‰‡å¢™</span>
                </li>
                <li class="nav-item" data-page="activities">
                    <span class="nav-icon">ğŸ“…</span>
                    <span class="nav-text">æ´»åŠ¨æŠ¥å</span>
                </li>
                <li class="nav-item" data-page="books">
                    <span class="nav-icon">ğŸ“–</span>
                    <span class="nav-text">ä¹¦ç±æ¨è</span>
                </li>
                <li class="nav-item" data-page="about">
                    <span class="nav-icon">â„¹ï¸</span>
                    <span class="nav-text">å…³äºæˆ‘ä»¬</span>
                </li>
            </ul>
        </nav>

        <main class="main-content">
            <header class="top-bar">
                <button class="menu-toggle" id="menuToggle">â˜°</button>
                <h1 class="page-title">é¦–é¡µ</h1>
                <div class="header-actions">
                    <button class="icon-btn">ğŸ””</button>
                    <button class="icon-btn">âš™ï¸</button>
                </div>
            </header>

            <div class="content-wrapper">
                <section id="home" class="page active">
                    <div class="hero-section">
                        <div class="hero-content">
                            <h1 class="hero-title">æ¬¢è¿æ¥åˆ°<br><span class="gradient-text">å¤šå·´èƒºè¯»ä¹¦ä¼š</span></h1>
                            <p class="hero-subtitle">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸€èµ·é˜…è¯»ã€åˆ†äº«ã€æˆé•¿</p>
                            <div class="hero-buttons">
                                <button class="btn btn-primary btn-large">ç«‹å³åŠ å…¥</button>
                                <button class="btn btn-secondary btn-large">äº†è§£æ›´å¤š</button>
                            </div>
                        </div>
                        <div class="hero-decoration">
                            <div class="floating-book book-1">ğŸ“š</div>
                            <div class="floating-book book-2">ğŸ“–</div>
                            <div class="floating-book book-3">âœ¨</div>
                        </div>
                    </div>

                    <div class="stats-section">
                        <div class="stat-card stat-pink">
                            <div class="stat-icon">ğŸ‘¥</div>
                            <div class="stat-number" id="totalMembers">0</div>
                            <div class="stat-label">æˆå‘˜æ€»æ•°</div>
                        </div>
                        <div class="stat-card stat-purple">
                            <div class="stat-icon">ğŸ“…</div>
                            <div class="stat-number" id="totalActivities">0</div>
                            <div class="stat-label">æ´»åŠ¨æ¬¡æ•°</div>
                        </div>
                        <div class="stat-card stat-blue">
                            <div class="stat-icon">ğŸ“š</div>
                            <div class="stat-number" id="totalBooks">0</div>
                            <div class="stat-label">æ¨èä¹¦ç±</div>
                        </div>
                    </div>

                    <div class="upcoming-section">
                        <h2 class="section-title">ğŸ“… å³å°†åˆ°æ¥çš„æ´»åŠ¨</h2>
                        <div class="activity-card" id="nextActivity">
                            <div class="activity-date">
                                <span class="day">15</span>
                                <span class="month">1æœˆ</span>
                            </div>
                            <div class="activity-info">
                                <h3>æš‚æ— æ´»åŠ¨å®‰æ’</h3>
                                <p>æ•¬è¯·æœŸå¾…</p>
                            </div>
                            <button class="btn btn-sm">æŸ¥çœ‹è¯¦æƒ…</button>
                        </div>
                    </div>

                    <div class="featured-section">
                        <h2 class="section-title">ğŸŒŸ ç²¾é€‰ä¹¦ç±</h2>
                        <div class="books-preview" id="booksPreview">
                        </div>
                    </div>
                </section>

                <section id="members" class="page">
                    <div class="page-header">
                        <h2>æˆå‘˜ç®¡ç†</h2>
                        <button class="btn btn-primary" id="addMemberBtn">
                            <span class="btn-icon">â•</span>
                            æ·»åŠ æˆå‘˜
                        </button>
                    </div>

                    <div class="search-box">
                        <span class="search-icon">ğŸ”</span>
                        <input type="text" id="memberSearch" placeholder="æœç´¢æˆå‘˜...">
                    </div>

                    <div class="members-grid" id="membersGrid">
                    </div>

                    <div class="modal" id="addMemberModal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>æ·»åŠ æˆå‘˜</h3>
                                <button class="close-btn" id="closeMemberModal">Ã—</button>
                            </div>
                            <form id="addMemberForm">
                                <div class="form-group">
                                    <label>å§“å</label>
                                    <input type="text" id="name" required>
                                </div>
                                <div class="form-group">
                                    <label>æ‰‹æœºå·</label>
                                    <input type="tel" id="phone" required>
                                </div>
                                <div class="form-group">
                                    <label>å¾®ä¿¡å·</label>
                                    <input type="text" id="wechat" required>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary" id="cancelAddMember">å–æ¶ˆ</button>
                                    <button type="submit" class="btn btn-primary">æ·»åŠ </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>

                <section id="photo-wall" class="page">
                    <div class="page-header">
                        <h2>ç…§ç‰‡å¢™</h2>
                        <button class="btn btn-primary" id="addPhotoBtn">
                            <span class="btn-icon">ğŸ“·</span>
                            æ·»åŠ ç…§ç‰‡
                        </button>
                    </div>

                    <div class="photo-grid" id="photoGrid">
                    </div>

                    <div class="modal" id="addPhotoModal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>æ·»åŠ ç…§ç‰‡</h3>
                                <button class="close-btn" id="closePhotoModal">Ã—</button>
                            </div>
                            <form id="addPhotoForm">
                                <div class="form-group">
                                    <label>æ—¥æœŸ</label>
                                    <input type="date" id="photoDate" required>
                                </div>
                                <div class="form-group">
                                    <label>æè¿°</label>
                                    <input type="text" id="photoDescription" placeholder="ä¾‹å¦‚ï¼šç¬¬12æœŸå¤šå·´èƒºè¯»ä¹¦ä¼š" required>
                                </div>
                                <div class="form-group">
                                    <label>ç…§ç‰‡URL</label>
                                    <input type="url" id="photoUrl" placeholder="https://..." required>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary" id="cancelAddPhoto">å–æ¶ˆ</button>
                                    <button type="submit" class="btn btn-primary">æ·»åŠ </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>

                <section id="activities" class="page">
                    <div class="page-header">
                        <h2>æ´»åŠ¨æŠ¥å</h2>
                        <button class="btn btn-primary" id="createActivityBtn">
                            <span class="btn-icon">â•</span>
                            å‘å¸ƒæ´»åŠ¨
                        </button>
                    </div>

                    <div class="activities-list" id="activitiesList">
                    </div>

                    <div class="modal" id="createActivityModal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>å‘å¸ƒæ´»åŠ¨</h3>
                                <button class="close-btn" id="closeActivityModal">Ã—</button>
                            </div>
                            <form id="createActivityForm">
                                <div class="form-group">
                                    <label>æ´»åŠ¨æ ‡é¢˜</label>
                                    <input type="text" id="activityTitle" required>
                                </div>
                                <div class="form-group">
                                    <label>æ´»åŠ¨æ—¥æœŸ</label>
                                    <input type="datetime-local" id="activityDate" required>
                                </div>
                                <div class="form-group">
                                    <label>æ´»åŠ¨åœ°ç‚¹</label>
                                    <input type="text" id="activityLocation" required>
                                </div>
                                <div class="form-group">
                                    <label>æ´»åŠ¨æè¿°</label>
                                    <textarea id="activityDescription" rows="4" required></textarea>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary" id="cancelCreateActivity">å–æ¶ˆ</button>
                                    <button type="submit" class="btn btn-primary">å‘å¸ƒ</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>

                <section id="books" class="page">
                    <div class="page-header">
                        <h2>ä¹¦ç±æ¨è</h2>
                        <button class="btn btn-primary" id="addBookBtn">
                            <span class="btn-icon">â•</span>
                            æ·»åŠ ä¹¦ç±
                        </button>
                    </div>

                    <div class="search-box">
                        <span class="search-icon">ğŸ”</span>
                        <input type="text" id="bookSearch" placeholder="æœç´¢ä¹¦ç±...">
                    </div>

                    <div class="books-grid" id="booksGrid">
                    </div>

                    <div class="modal" id="addBookModal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>æ·»åŠ ä¹¦ç±</h3>
                                <button class="close-btn" id="closeBookModal">Ã—</button>
                            </div>
                            <form id="addBookForm">
                                <div class="form-group">
                                    <label>ä¹¦å</label>
                                    <input type="text" id="bookTitle" required>
                                </div>
                                <div class="form-group">
                                    <label>ä½œè€…</label>
                                    <input type="text" id="bookAuthor" required>
                                </div>
                                <div class="form-group">
                                    <label>ç±»å‹</label>
                                    <input type="text" id="bookGenre" required>
                                </div>
                                <div class="form-group">
                                    <label>æ¨èç†ç”±</label>
                                    <textarea id="bookDescription" rows="4" required></textarea>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary" id="cancelAddBook">å–æ¶ˆ</button>
                                    <button type="submit" class="btn btn-primary">æ·»åŠ </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>

                <section id="about" class="page">
                    <div class="about-container">
                        <div class="about-header">
                            <h2>å…³äºæˆ‘ä»¬</h2>
                            <p>å¤šå·´èƒºè¯»ä¹¦ä¼š - è®©é˜…è¯»æ›´æœ‰è¶£</p>
                        </div>

                        <div class="about-card">
                            <h3>ğŸ“– æˆ‘ä»¬çš„ä½¿å‘½</h3>
                            <p>æˆ‘ä»¬æ˜¯ä¸€ä¸ªçƒ­çˆ±é˜…è¯»çš„ç¤¾åŒºï¼Œå®šæœŸä¸¾åŠè¯»ä¹¦åˆ†äº«æ´»åŠ¨ï¼Œæ—¨åœ¨é€šè¿‡é˜…è¯»äº¤æµï¼Œæ‹“å±•è§†é‡ï¼Œå¢é•¿çŸ¥è¯†ï¼Œç»“äº¤å¿—åŒé“åˆçš„æœ‹å‹ã€‚</p>
                        </div>

                        <div class="about-card">
                            <h3>ğŸ“… æ´»åŠ¨é¢‘ç‡</h3>
                            <p>æ¯æœˆä¸¾åŠ2æ¬¡çº¿ä¸‹è¯»ä¹¦åˆ†äº«ä¼šï¼Œæ¯æ¬¡æ´»åŠ¨å›´ç»•ä¸€æœ¬ç²¾é€‰ä¹¦ç±å±•å¼€è®¨è®ºã€‚</p>
                        </div>

                        <div class="about-card">
                            <h3>ğŸ“ è”ç³»æ–¹å¼</h3>
                            <div class="contact-info">
                                <div class="contact-item">
                                    <span class="contact-icon">ğŸ’¬</span>
                                    <span>å¾®ä¿¡ï¼šbookclub2026</span>
                                </div>
                                <div class="contact-item">
                                    <span class="contact-icon">ğŸ“§</span>
                                    <span>é‚®ç®±ï¼šcontact@bookclub.com</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <div class="modal-overlay" id="modalOverlay"></div>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => console.log('Service Worker æ³¨å†ŒæˆåŠŸ:', registration.scope))
                    .catch(error => console.log('Service Worker æ³¨å†Œå¤±è´¥:', error));
            });
        }

        let appData = {
            members: [],
            activities: [],
            books: [],
            photos: []
        };

        function initData() {
            const savedData = localStorage.getItem('bookClubData');
            if (savedData) {
                appData = JSON.parse(savedData);
            } else {
                appData = {
                    members: [
                        { id: 1, name: 'å¼ ä¸‰', phone: '13800138000', wechat: 'zhangsan', attendances: 5 },
                        { id: 2, name: 'æå››', phone: '13900139000', wechat: 'lisi', attendances: 3 },
                        { id: 3, name: 'ç‹äº”', phone: '13700137000', wechat: 'wangwu', attendances: 8 }
                    ],
                    activities: [
                        {
                            id: 1,
                            title: 'ç¬¬1æœŸå¤šå·´èƒºè¯»ä¹¦ä¼š',
                            date: '2026-01-15T14:00',
                            location: 'å›¾ä¹¦é¦†',
                            description: 'è®¨è®ºã€Šç™¾å¹´å­¤ç‹¬ã€‹',
                            attendees: [1, 3]
                        }
                    ],
                    books: [
                        {
                            id: 1,
                            title: 'ç™¾å¹´å­¤ç‹¬',
                            author: 'åŠ è¥¿äºšÂ·é©¬å°”å…‹æ–¯',
                            genre: 'æ–‡å­¦',
                            description: 'é­”å¹»ç°å®ä¸»ä¹‰ä»£è¡¨ä½œ'
                        }
                    ],
                    photos: [
                        {
                            id: 1,
                            date: '2026-01-15',
                            description: 'ç¬¬1æœŸå¤šå·´èƒºè¯»ä¹¦ä¼šåˆå½±',
                            url: 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400&h=300&fit=crop'
                        }
                    ]
                };
                saveData();
            }
            renderAll();
        }

        function saveData() {
            localStorage.setItem('bookClubData', JSON.stringify(appData));
        }

        function renderAll() {
            renderHome();
            renderMembers();
            renderActivities();
            renderBooks();
            renderPhotos();
        }

        function renderHome() {
            document.getElementById('totalMembers').textContent = appData.members.length;
            document.getElementById('totalActivities').textContent = appData.activities.length;
            document.getElementById('totalBooks').textContent = appData.books.length;

            const nextActivity = document.getElementById('nextActivity');
            if (appData.activities.length > 0) {
                const activity = appData.activities[0];
                const date = new Date(activity.date);
                nextActivity.innerHTML = `
                    <div class="activity-date">
                        <span class="day">${date.getDate()}</span>
                        <span class="month">${date.getMonth() + 1}æœˆ</span>
                    </div>
                    <div class="activity-info">
                        <h3>${activity.title}</h3>
                        <p>${activity.location}</p>
                    </div>
                    <button class="btn btn-sm">æŸ¥çœ‹è¯¦æƒ…</button>
                `;
            }

            const booksPreview = document.getElementById('booksPreview');
            booksPreview.innerHTML = appData.books.slice(0, 3).map(book => `
                <div class="book-card">
                    <div class="book-cover">ğŸ“–</div>
                    <h4>${book.title}</h4>
                    <p>${book.author}</p>
                </div>
            `).join('');
        }

        function renderMembers() {
            const grid = document.getElementById('membersGrid');
            grid.innerHTML = appData.members.map(member => `
                <div class="member-card">
                    <div class="member-avatar">${member.name.charAt(0)}</div>
                    <div class="member-info">
                        <h4>${member.name}</h4>
                        <p>${member.phone}</p>
                        <p>å‚åŠ æ¬¡æ•°ï¼š${member.attendances}</p>
                    </div>
                    <button class="btn-icon" onclick="deleteMember(${member.id})">ğŸ—‘ï¸</button>
                </div>
            `).join('');
        }

        function renderActivities() {
            const list = document.getElementById('activitiesList');
            list.innerHTML = appData.activities.map(activity => {
                const date = new Date(activity.date);
                return `
                    <div class="activity-item">
                        <div class="activity-date-box">
                            <span class="day">${date.getDate()}</span>
                            <span class="month">${date.getMonth() + 1}æœˆ</span>
                        </div>
                        <div class="activity-details">
                            <h4>${activity.title}</h4>
                            <p>ğŸ“ ${activity.location}</p>
                            <p>ğŸ“… ${date.toLocaleString('zh-CN')}</p>
                            <p>${activity.description}</p>
                        </div>
                        <button class="btn-icon" onclick="deleteActivity(${activity.id})">ğŸ—‘ï¸</button>
                    </div>
                `;
            }).join('');
        }

        function renderBooks() {
            const grid = document.getElementById('booksGrid');
            grid.innerHTML = appData.books.map(book => `
                <div class="book-card">
                    <div class="book-cover">ğŸ“–</div>
                    <div class="book-info">
                        <h4>${book.title}</h4>
                        <p>${book.author}</p>
                        <span class="book-genre">${book.genre}</span>
                        <p>${book.description}</p>
                    </div>
                    <button class="btn-icon" onclick="deleteBook(${book.id})">ğŸ—‘ï¸</button>
                </div>
            `).join('');
        }

        function renderPhotos() {
            const grid = document.getElementById('photoGrid');
            grid.innerHTML = appData.photos.map(photo => `
                <div class="photo-card">
                    <img src="${photo.url}" alt="${photo.description}" onerror="this.src='https://via.placeholder.com/400x300?text=Image'">
                    <div class="photo-overlay">
                        <h4>${photo.description}</h4>
                        <p>${photo.date}</p>
                    </div>
                    <button class="btn-icon" onclick="deletePhoto(${photo.id})">ğŸ—‘ï¸</button>
                </div>
            `).join('');
        }

        function deleteMember(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæˆå‘˜å—ï¼Ÿ')) {
                appData.members = appData.members.filter(m => m.id !== id);
                saveData();
                renderMembers();
                renderHome();
            }
        }

        function deleteActivity(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ´»åŠ¨å—ï¼Ÿ')) {
                appData.activities = appData.activities.filter(a => a.id !== id);
                saveData();
                renderActivities();
                renderHome();
            }
        }

        function deleteBook(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æœ¬ä¹¦å—ï¼Ÿ')) {
                appData.books = appData.books.filter(b => b.id !== id);
                saveData();
                renderBooks();
                renderHome();
            }
        }

        function deletePhoto(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™å¼ ç…§ç‰‡å—ï¼Ÿ')) {
                appData.photos = appData.photos.filter(p => p.id !== id);
                saveData();
                renderPhotos();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            initData();

            const menuToggle = document.getElementById('menuToggle');
            const sidebar = document.querySelector('.sidebar');
            const mainContent = document.querySelector('.main-content');

            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('open');
                mainContent.classList.toggle('sidebar-open');
            });

            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                    item.classList.add('active');

                    const page = item.dataset.page;
                    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                    document.getElementById(page).classList.add('active');

                    document.querySelector('.page-title').textContent = item.querySelector('.nav-text').textContent;

                    if (window.innerWidth <= 768) {
                        sidebar.classList.remove('open');
                        mainContent.classList.remove('sidebar-open');
                    }
                });
            });

            const modalOverlay = document.getElementById('modalOverlay');
            const modals = document.querySelectorAll('.modal');

            function openModal(modal) {
                modal.classList.add('active');
                modalOverlay.classList.add('active');
            }

            function closeModal(modal) {
                modal.classList.remove('active');
                modalOverlay.classList.remove('active');
            }

            document.getElementById('addMemberBtn').addEventListener('click', () => openModal(document.getElementById('addMemberModal')));
            document.getElementById('closeMemberModal').addEventListener('click', () => closeModal(document.getElementById('addMemberModal')));
            document.getElementById('cancelAddMember').addEventListener('click', () => closeModal(document.getElementById('addMemberModal')));

            document.getElementById('addMemberForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const member = {
                    id: Date.now(),
                    name: document.getElementById('name').value,
                    phone: document.getElementById('phone').value,
                    wechat: document.getElementById('wechat').value,
                    attendances: 0
                };
                appData.members.push(member);
                saveData();
                renderMembers();
                renderHome();
                closeModal(document.getElementById('addMemberModal'));
                e.target.reset();
            });

            document.getElementById('addPhotoBtn').addEventListener('click', () => openModal(document.getElementById('addPhotoModal')));
            document.getElementById('closePhotoModal').addEventListener('click', () => closeModal(document.getElementById('addPhotoModal')));
            document.getElementById('cancelAddPhoto').addEventListener('click', () => closeModal(document.getElementById('addPhotoModal')));

            document.getElementById('addPhotoForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const photo = {
                    id: Date.now(),
                    date: document.getElementById('photoDate').value,
                    description: document.getElementById('photoDescription').value,
                    url: document.getElementById('photoUrl').value
                };
                appData.photos.push(photo);
                saveData();
                renderPhotos();
                closeModal(document.getElementById('addPhotoModal'));
                e.target.reset();
            });

            document.getElementById('createActivityBtn').addEventListener('click', () => openModal(document.getElementById('createActivityModal')));
            document.getElementById('closeActivityModal').addEventListener('click', () => closeModal(document.getElementById('createActivityModal')));
            document.getElementById('cancelCreateActivity').addEventListener('click', () => closeModal(document.getElementById('createActivityModal')));

            document.getElementById('createActivityForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const activity = {
                    id: Date.now(),
                    title: document.getElementById('activityTitle').value,
                    date: document.getElementById('activityDate').value,
                    location: document.getElementById('activityLocation').value,
                    description: document.getElementById('activityDescription').value,
                    attendees: []
                };
                appData.activities.push(activity);
                saveData();
                renderActivities();
                renderHome();
                closeModal(document.getElementById('createActivityModal'));
                e.target.reset();
            });

            document.getElementById('addBookBtn').addEventListener('click', () => openModal(document.getElementById('addBookModal')));
            document.getElementById('closeBookModal').addEventListener('click', () => closeModal(document.getElementById('addBookModal')));
            document.getElementById('cancelAddBook').addEventListener('click', () => closeModal(document.getElementById('addBookModal')));

            document.getElementById('addBookForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const book = {
                    id: Date.now(),
                    title: document.getElementById('bookTitle').value,
                    author: document.getElementById('bookAuthor').value,
                    genre: document.getElementById('bookGenre').value,
                    description: document.getElementById('bookDescription').value
                };
                appData.books.push(book);
                saveData();
                renderBooks();
                renderHome();
                closeModal(document.getElementById('addBookModal'));
                e.target.reset();
            });

            modalOverlay.addEventListener('click', () => {
                modals.forEach(modal => closeModal(modal));
            });

            document.getElementById('memberSearch').addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                const filtered = appData.members.filter(m => 
                    m.name.toLowerCase().includes(query) || 
                    m.phone.includes(query)
                );
                const grid = document.getElementById('membersGrid');
                grid.innerHTML = filtered.map(member => `
                    <div class="member-card">
                        <div class="member-avatar">${member.name.charAt(0)}</div>
                        <div class="member-info">
                            <h4>${member.name}</h4>
                            <p>${member.phone}</p>
                            <p>å‚åŠ æ¬¡æ•°ï¼š${member.attendances}</p>
                        </div>
                        <button class="btn-icon" onclick="deleteMember(${member.id})">ğŸ—‘ï¸</button>
                    </div>
                `).join('');
            });

            document.getElementById('bookSearch').addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                const filtered = appData.books.filter(b => 
                    b.title.toLowerCase().includes(query) || 
                    b.author.toLowerCase().includes(query)
                );
                const grid = document.getElementById('booksGrid');
                grid.innerHTML = filtered.map(book => `
                    <div class="book-card">
                        <div class="book-cover">ğŸ“–</div>
                        <div class="book-info">
                            <h4>${book.title}</h4>
                            <p>${book.author}</p>
                            <span class="book-genre">${book.genre}</span>
                            <p>${book.description}</p>
                        </div>
                        <button class="btn-icon" onclick="deleteBook(${book.id})">ğŸ—‘ï¸</button>
                    </div>
                `).join('');
            });
        });
    </script>
</body>
</html>